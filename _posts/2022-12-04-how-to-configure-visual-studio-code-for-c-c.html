---
layout: post
title: How to configure Visual Studio Code for C/C++
date: 2022-12-04 11:04:48.000000000 +08:00
type: post
parent_id: '0'
published: true
password: ''
status: publish
categories:
- Programming language
tags:
- C++
meta:
  _last_editor_used_jetpack: block-editor
  timeline_notification: '1670123091'
  _publicize_job_id: '79316760907'
  _publicize_done_external: a:2:{s:8:"facebook";a:1:{i:26861408;s:53:"https://facebook.com/1630088060609695_192870096602495";}s:7:"twitter";a:1:{i:26870712;s:58:"https://twitter.com/mincheng_ds/status/1599238296772743168";}}
  _publicize_done_23923317: '1'
  _wpas_done_26861408: '1'
  _publicize_done_23927232: '1'
  _wpas_done_26870712: '1'
  publicize_twitter_user: mincheng_ds
  wordads_ufa: s:wpcom-ufa-v3-beta:1670123233
author:
  login: c013a2015
  email: c013a2015@gmail.com
  display_name: sheng gao
  first_name: sheng
  last_name: gao
permalink: "/2022/12/04/how-to-configure-visual-studio-code-for-c-c/"
---
<p><!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.0 Transitional//EN" "http://www.w3.org/TR/REC-html40/loose.dtd"><br />
<!-- wp:paragraph {"placeholder":"Are you more of a night or morning person?"} --><html><body></p>
<p>Visual studio code is a good IDE for code developer, e.g. I am previously coding C++/C using visual studio in Window. But after I move into linux/mac os, I need to find a IDE (free). If you are a geek, maybe you like VI. But for me, I am familiar with IDE. Visual studio code is a replacement of Visual Studio, and free.</p>
<p><!-- /wp:paragraph --></p>
<p><!-- wp:paragraph {"placeholder":"Are you more of a night or morning person?"} --></p>
<p>Before coding, compiling, debugging and running your code, you need to do some setup. Following is step-by-step for C++/C</p>
<p><!-- /wp:paragraph --></p>
<p><!-- wp:heading {"level":6} --></p>
<h6>Step 1:  Install Visual studio code</h6>
<p><!-- /wp:heading --></p>
<p><!-- wp:paragraph --></p>
<p> Download <a href="https://code.visualstudio.com/">https://code.visualstudio.com/</a>,  and install. Install C/C++ plugin. e.g. </p>
<p><!-- /wp:paragraph --></p>
<p><!-- wp:paragraph --></p>
<p>C/C++ IntelliSense, debugging, and code browsing.</p>
<p><!-- /wp:paragraph --></p>
<p><!-- wp:heading {"level":6} --></p>
<h6>Step 2: Create a test file, e.g.</h6>
<p><!-- /wp:heading --></p>
<p><!-- wp:code --></p>
<pre class="wp-block-code"><code>test.cpp

#include &lt;iostream&gt;

using namespace std;

int main() {
    int i;

    cin &gt;&gt; i;
    cout &lt;&lt; "**** \n" &lt;&lt; i &lt;&lt; "\n";

    return 1;
}</code></pre>
<p><!-- /wp:code --></p>
<p><!-- wp:heading {"level":6} --></p>
<h6>  Step 3: Configure a task, compile with debug information. </h6>
<p><!-- /wp:heading --></p>
<p><!-- wp:paragraph {"placeholder":"Are you more of a night or morning person?"} --></p>
<p>In the VSC menu, click Terminal -&gt;  Configure default task -&gt; Select compiler, I use <em><strong>C/C++ g++ build active</strong></em>. The task setting looks as </p>
<p><!-- /wp:paragraph --></p>
<p><!-- wp:code --></p>
<pre class="wp-block-code"><code>task.json:
        {
           "type": "cppbuild",
            "label": "C/C++: g++ build active file",
            "command": "/usr/bin/g++",
            "args": [
                "-fdiagnostics-color=always",
                "-g",
                "${file}",
                "-o",
                "${fileDirname}/${fileBasenameNoExtension}"
            ],
            "options": {
                "cwd": "${fileDirname}"
            },
            "problemMatcher": [
                "$gcc"
            ],
            "group": {
                "kind": "build",
                "isDefault": true
            },
            "detail": "Task generated by Debugger."
        } </code></pre>
<p><!-- /wp:code --></p>
<p><!-- wp:paragraph --></p>
<p>It tells g++ how to compile your code (arguments you use in terminal), and where the compile output is. In the above, it is basic compile with debug infomation (-g). </p>
<p><!-- /wp:paragraph --></p>
<p><!-- wp:paragraph --></p>
<p>${file} = test.cpp</p>
<p><!-- /wp:paragraph --></p>
<p><!-- wp:paragraph --></p>
<p> ${fileDirname} = fold path of test.cpp</p>
<p><!-- /wp:paragraph --></p>
<p><!-- wp:paragraph --></p>
<p>${fileBasenameNoExtension}: test</p>
<p><!-- /wp:paragraph --></p>
<p><!-- wp:paragraph --></p>
<p>So after compile success, the output is in current folder, naming <strong><em>test</em></strong>.</p>
<p><!-- /wp:paragraph --></p>
<p><!-- wp:paragraph --></p>
<p>In VSC setting, there are many variables, i.e., variable in ${variable_name}.  You can refer to <a href="https://code.visualstudio.com/docs/editor/variables-reference">https://code.visualstudio.com/docs/editor/variables-reference</a> to learn what it means.</p>
<p><!-- /wp:paragraph --></p>
<p><!-- wp:heading {"level":6} --></p>
<h6>Step 4: Run and debug your code</h6>
<p><!-- /wp:heading --></p>
<p><!-- wp:paragraph --></p>
<p>In VSC menu, Run -&gt; Start debugging. High probability chances, you will get Launch.json not found. Don't worry. Follow instruction, and add it. The launch.json tell runner where your program is. </p>
<p><!-- /wp:paragraph --></p>
<p><!-- wp:code --></p>
<pre class="wp-block-code"><code>launch.json: 

{
  "configurations": [
  {
    "name": "(gdb) Launch",
    "type": "cppdbg",
    "request": "launch",
    "program": "${workspaceFolder}/${fileBasenameNoExtension}",
    "args": ["12"],
    "stopAtEntry": false,
    "cwd": "${fileDirname}",
    "environment": [],
    "externalConsole": false,
    "MIMode": "gdb",
    "setupCommands": [
        {
            "description": "Enable pretty-printing for gdb",
            "text": "-enable-pretty-printing",
            "ignoreFailures": true
        },
        {
            "description":  "Set Disassembly Flavor to Intel",
            "text": "-gdb-set disassembly-flavor intel",
            "ignoreFailures": true
        }
    ]
  },
] </code></pre>
<p><!-- /wp:code --></p>
<p><!-- wp:heading {"level":6} --></p>
<h6>Step 5: Add arguments for your program</h6>
<p><!-- /wp:heading --></p>
<p><!-- wp:paragraph --></p>
<p>Above test.cpp should be successfully run and debug in VSC. But sometime, we want to pass arguments into program. For example, in above test code, input integer value is from cin reading. You can also pass it as an argument. Here is modified code</p>
<p><!-- /wp:paragraph --></p>
<p><!-- wp:code --></p>
<pre class="wp-block-code"><code>test.cpp: 1 argument need. Remember program is as 1 argument. 

#include &lt;iostream&gt;
#include &lt;cstdlib&gt;

using namespace std;

int main(int narg, char** args) {
    int i;

    cout &lt;&lt; narg &lt;&lt; "\n";
    if(narg != 2) {
        cout &lt;&lt; "Warning: 1 argument needed\n";
    }
    cout &lt;&lt; args[1] &lt;&lt; "\n";
    i = atoi(args[1]);
    cout &lt;&lt; "**** \n" &lt;&lt; i &lt;&lt; "\n";

    return 1;
}</code></pre>
<p><!-- /wp:code --></p>
<p><!-- wp:paragraph --></p>
<p>You only need set args in launch.json, like</p>
<p><!-- /wp:paragraph --></p>
<p><!-- wp:code --></p>
<pre class="wp-block-code"><code>"args": ["12"],</code></pre>
<p><!-- /wp:code --><br />
</body></html></p>
